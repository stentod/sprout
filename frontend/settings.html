<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">  <title>Settings - Sprout Budget</title>
  <link rel="stylesheet" href="style.css?v=4.4">
  <link rel="icon" href="logo.svg" type="image/svg+xml">
</head>
<body>
  <div class="settings-container">
    <header class="settings-header">
      <div class="header-content">
        <div class="header-left">
          <a href="/" class="back-button">
            <span class="back-icon">‚Üê</span>
            Back to Dashboard
          </a>
        </div>
        <h1>Settings</h1>
        <div class="header-right">
          <a href="/history.html" class="back-button">History</a>
        </div>
      </div>
    </header>

    <main class="settings-main">
      <section class="settings-section">
        <h2>Daily Budget</h2>
        <p class="section-description">Set your daily spending limit:</p>
        <form id="daily-limit-form" class="limit-form">
          <div id="current-limit-display" class="current-limit-display">
            <span class="current-limit-value">$30.00</span>
            <p class="info-text">Current daily limit</p>
          </div>
          <div class="form-actions">
            <div class="budget-input-group">
              <span class="currency-symbol">$</span>
              <input type="number" id="daily-limit-input" min="0" step="0.01" placeholder="30.00" class="form-input">
            </div>
            <button type="submit" id="save-button" class="btn btn-primary">Save</button>
            <button type="button" id="cancel-button" class="btn btn-secondary">Cancel</button>
          </div>
          <p class="info-text">This is your daily spending target. Try to stay under this amount!</p>
        </form>
        <div id="status-message" class="status-message" style="display: none;"></div>
      </section>

      <section class="settings-section">
        <h2>Daily Budget Rollover</h2>
        <p class="section-description">Enable rollover to carry over unspent daily budget to the next day:</p>
        <div class="setting-item">
          <div class="preference-toggle">
            <label class="toggle-switch">
              <input type="checkbox" id="rollover-toggle">
              <span class="toggle-slider"></span>
            </label>
            <div class="preference-info">
              <span class="preference-label">Enable daily budget rollover</span>
              <p class="preference-description">
                When enabled, any unspent amount from your daily budget will be added to tomorrow's budget. 
                For example: if you have $30 daily budget and only spend $20, tomorrow you'll have $40 to spend.
              </p>
            </div>
          </div>
        </div>
        <div id="rollover-status-message" class="status-message" style="display: none;"></div>
      </section>

      <section class="settings-section">
        <h2>Expense Preferences</h2>
        <p class="section-description">Customize how you add expenses:</p>
        <div class="setting-item">
          <div class="preference-toggle">
            <label class="toggle-switch">
              <input type="checkbox" id="require-categories-toggle" checked>
              <span class="toggle-slider"></span>
            </label>
            <div class="preference-info">
              <span class="preference-label">Require categories for all expenses</span>
              <p class="preference-description">
                When enabled, you must select a category for every expense. 
                When disabled, expenses without categories will be marked as "Uncategorized."
              </p>
            </div>
          </div>
        </div>
        <div id="preference-status-message" class="status-message" style="display: none;"></div>
      </section>

      <section class="settings-section">
        <h2>Categories</h2>
        <p class="section-description">Manage your expense categories and set individual budgets.</p>
        <div id="category-budgets-container" class="category-budgets-container">
          <!-- Categories will be loaded here -->
        </div>
        <div class="form-actions">
          <button id="save-all-budgets-button" class="btn btn-primary" disabled>No Changes</button>
          <button id="reset-budgets-button" class="btn btn-secondary">Reset</button>
          <button id="addCategory" class="btn btn-secondary">+ Add Custom Category</button>
        </div>
        <div id="category-status-message" class="status-message" style="display: none;"></div>
      </section>



      <section class="settings-section">
        <h2>Account</h2>
        <p class="section-description">Manage your account settings and preferences.</p>
        <div class="form-actions">
          <button id="logoutBtn" class="btn btn-danger">Logout</button>
        </div>
      </section>
    </main>

    <div id="messageContainer" class="message-container"></div>
  </div>

  <script src="settings.js?v=4.4"></script>
</body>
</html> 